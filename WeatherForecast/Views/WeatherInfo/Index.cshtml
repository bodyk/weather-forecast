@using WeatherForecast.HelperClasses;
@model WeatherForecast.Models.WeatherInfo

@{
    ViewBag.Title = "Index";
    var apiResponse = Model?.apiResponse ?? "";
}

<h2>Index</h2>

<h1>Implement OpenWeatherMap API in ASP.NET MVC</h1>
<div id="apiDiv">
    <h4>Select the City for Weather Report</h4>
    
    @{
        List<SelectListItem> listItems= new List<SelectListItem>();

        foreach (RootWeatherInfo t in Model.infos)
        {
            listItems.Add(new SelectListItem(){Text = t.city.name, Value = t.city.name });
        }
    }
    
    @using (Html.BeginForm("Index", "WeatherInfo")) 
    {
        <div class="col-md-4">
            @Html.DropDownList("city", @listItems, "Select city"))
        </div>
        <input type="submit" value="Submit" />

    }

    <div id="message">@(new HtmlString(apiResponse))</div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $("input[id='cities']").change(function () {
            $(this).parents("#apiDiv").find("span").css("background", "none");
            $(this).parent().css("background", "#4CAF50");
        });
    });
</script>