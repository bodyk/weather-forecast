@model WeatherForecast.Models.IDetailedWeatherInfo

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Index";

    string cityName = @Model?.GetCityName();
    string countryCode = @Model?.GetCountryCode();
}
<div>
    <div class="well well-sm">
        <div class="table-responsive">
            <table class="table table-striped">
                <tr>
                    @foreach (var city in (List<string>)@ViewBag.StartupCities)
                    {
                        <th>@Html.ActionLink(city, "Index", new { city = @city })</th>
                    }
                </tr>
            </table>
        </div>
        <div id="cityInputForm">
            @using (Html.BeginForm("Index", "WeatherInfo"))
            {

                <div id="cityEditDiv">
                    @Html.TextBox("city", null, new { @class = "form-control col-xs-12", id = "cityEdit", required = "required" })
                </div>
                <div id="citySubmitDiv">
                    <input type="submit" value="Show weather" class="form-control btn-success" id="btnShow" />
                </div>

            }
        </div>
    </div>
    @if (@Model?.GetWeatherParams().Count != 0)
    {

        <div>
            <table class="table table-striped">
                <tr>
                    <th>@Html.ActionLink("Current Day", "Index", new { time = 1, city = cityName })</th>
                    <th>@Html.ActionLink("3 Days", "Index", new { time = 3, city = cityName })</th>
                    <th>@Html.ActionLink("7 Days", "Index", new { time = 7, city = cityName })</th>
                </tr>
            </table>
        </div>
        <div class="table-responsive">
            <table class="table table-striped">
                <tr>
                    <th><h3>@cityName</h3></th>

                    <th id="countryCode"><h3>@countryCode</h3></th>
                </tr>
            </table>
        </div>
        <h4>Weather forecast for @Model.GetForecastCountDays() days</h4>
        <div class="divParent">
            @foreach (var dayWeather in @Model.GetWeatherParams())
                {
                <table class="table table-condensed">
                    <thead>
                        <tr>
                            <th>
                                @dayWeather.Date
                            </th>
                            <th>
                                <img src="@($"{dayWeather.IconPath}")" />
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var wetherParam in @dayWeather.DayInfo)
                        {
                            <tr>
                                <td class="divTableKey">@wetherParam.Key:</td>
                                <td class="divTableValue">@wetherParam.Value</td>
                            </tr>
                        }
                    </tbody>
                </table>

                <hr class="half-rule" />
            }
        </div>
    }
</div>